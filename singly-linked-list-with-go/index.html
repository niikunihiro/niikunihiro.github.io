<!DOCTYPE html>
<html lang="en">
    <head>
      
        <meta http-equiv="X-UA-Compatible" content="IE=edge" >
        <meta http-equiv="content-type" content="text/html; charset=utf-8">

        <!-- SEO -->
        
        <title> Goによるデータ構造 連結リスト | Nii Note </title>
        

        <!-- Enable responsiveness on mobile devices-->
        <meta name="viewport"  content="width=device-width, initial-scale=1.0, maximum-scale=1" >
        
        <meta content="website" property="og:type"/>
        <meta content="Nii Note" property="og:site_name"/>
        <meta content="https://niikunihiro.github.io/singly-linked-list-with-go/" property="og:url"/>
        <meta content="https://niikunihiro.github.io/singly-linked-list-with-go/" property="twitter:url"/>
  
        <meta content="Goによるデータ構造 連結リスト" property="og:title"/>
        <meta content="Goによるデータ構造 連結リスト" property="twitter:title"/>
  
  
  
        <meta content="summary_large_image" property="twitter:card"/>
        <meta content="https://niikunihiro.github.io/images/cover.png" property="og:image"/>
        <meta content="https://niikunihiro.github.io/images/cover.png" property="twitter:image"/>
  

        <!--  css -->
        <link rel="stylesheet"  href="https:&#x2F;&#x2F;niikunihiro.github.io/ergo.css" >

        <!-- fonts -->
        <!-- preload  -->
        <link rel="preload" href="https://fonts.googleapis.com/css?family=Montserrat:200,300,300i,400,500,500i,600,700,800,900|Raleway" as="style">
        <link rel="preload"  href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" as="style" >
        <!-- load -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:200,300,300i,400,500,500i,600,700,800,900|Raleway">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"  integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
      
    </head>

    <body>
      
        
<input type="checkbox" id="openSidebarMenu" class="openSidebarMenu">
<label class="menu cross menu--1" for="openSidebarMenu">
    <svg viewBox="0 0 75 75" xmlns="https://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="30" />
        <path class="line--1" d="M0 40h62c13 0 6 28-4 18L35 35" />
        <path class="line--2" d="M0 50h70" />
        <path class="line--3" d="M0 60h62c13 0 6-28-4-18L35 65" />
    </svg>
</label>

<div id="sidebarMenu">
    <div class="menu_wrapper">
        <ul class="sidebarMenuInner">
            <li>
                <a href="https:&#x2F;&#x2F;niikunihiro.github.io" >Nii Note</a>
                <div class="menu_div" ></div>
            </li>
            
            
            <li><a href="https://github.com/niikunihiro" target="_blank" >niikunihiro</a><i class="fab fa-github" ></i></li>
            
            
            
            
            
            
            
            
            
        </ul>
    </div>
</div>

      

      
<nav id="overlord" class="overlord" >
  
<figure class="mini_logo ">
    <a href="https:&#x2F;&#x2F;niikunihiro.github.io" style="background-image: url(https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;niikunihiro&#x2F;niikunihiro.github.io&#x2F;d2b561e132826a2e42470c9b4f28213701632e46&#x2F;profile.jpg)"></a>
</figure>
<h5>
    <a href="https:&#x2F;&#x2F;niikunihiro.github.io">Nii Note</a>
</h5>

</nav>

<section class="post_container">
  <article>
    
      <h1 class="article_title"><a href="https:&#x2F;&#x2F;niikunihiro.github.io&#x2F;singly-linked-list-with-go&#x2F;" id="article_link">Goによるデータ構造 連結リスト</a></h1>
      
<ul class="frontmatter frontmatter_page" id="frontmatter">
    <li>
        <time class="article_time"  datetime="2021-03-17">March 17, 2021</time>
    </li>
    <span class="dotDivider"></span>
    <li> 2192 words </li>
    <span class="dotDivider" ></span>
    <li> 11 min </li>
</ul>

      <p>年始にデータ構造の記事を書いてから、はや二ヶ月が過ぎたので続きを書く。</p>
<p>テキストによると連結リストを学ぶにあたっての目標とポイントは以下の通りです。</p>
<ul>
<li>連結リストに対するデータの探索、挿入、削除について基本的な操作を学ぶ。</li>
<li>連結リストと配列との操作効率の違いについても学習する</li>
</ul>
<p>配列の特徴をまとめるとこんな感じ</p>
<ul>
<li>配列は添字を使ってデータを挿入・探索する。</li>
<li>探索においては添字でデータへアクセスできるので、最初のデータと途中のデータと最後のデータとで同じ時間でアクセスできる。</li>
<li>配列のサイズは生成時に定義するので、後からサイズを変更するのは難しい。可変長配列はサイズ変更を意識しないでコーディングできるが、コードの書き方によっては参照先が変わることに注意が必要だったりする。</li>
<li>配列の途中にデータを挿入・削除した場合にできる空きを埋める処理ではデータ数に応じて相応の負荷がかかる。</li>
</ul>
<p>対して連結リストの特徴は次のようになる</p>
<ul>
<li>利用したいデータの個数だけメモリを都度確保したり、開放したりできるのでメモリを効率的に使用できる。</li>
<li>探索は最初のノードから行うのでデータ数に応じた計算量が必要になる。</li>
<li>データ間の相対的な位置の変更が容易なためデータの挿入や削除時に配列のようなデータ移動は発生しない。</li>
</ul>
<p>連結リストは構造体の中にデータと次のデータへの参照を持つデータ構造で、Goで書くと連結リストとノードは次のようになる。</p>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">// List 連結リスト
</span><span style="font-weight:bold;color:#a71d5d;">type </span><span style="color:#323232;">List </span><span style="font-weight:bold;color:#a71d5d;">struct </span><span style="color:#323232;">{
	head *Node
}

</span><span style="font-style:italic;color:#969896;">// Node 連結リストのノード
</span><span style="font-weight:bold;color:#a71d5d;">type </span><span style="color:#323232;">Node </span><span style="font-weight:bold;color:#a71d5d;">struct </span><span style="color:#323232;">{
	value </span><span style="font-weight:bold;color:#a71d5d;">int
	</span><span style="color:#323232;">next  *Node
}
</span></pre><h2 id="lian-jie-risutohenodetacha-ru">連結リストへのデータ挿入</h2>
<p>説明はコードを見たほうがわかりやすいと思うので、愚直にデータを入れていく例を書きます。</p>
<pre style="background-color:#ffffff;">
<span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	</span><span style="font-style:italic;color:#969896;">// 先頭の Node を作る
	</span><span style="color:#323232;">head </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">100
	</span><span style="font-style:italic;color:#969896;">// 連結する Node を生成して next に入れる
</span><span style="color:#323232;">	head.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.next.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">200
	</span><span style="font-style:italic;color:#969896;">// 更に繰り返す
</span><span style="color:#323232;">	head.next.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.next.next.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">300</span><span style="color:#323232;">
	head.next.next.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.next.next.next.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">400
	</span><span style="color:#323232;">linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}


</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListPrint</span><span style="color:#323232;">(n Node) {
	</span><span style="font-weight:bold;color:#a71d5d;">for </span><span style="color:#323232;">{
		fmt.Printf(</span><span style="color:#183691;">&quot;</span><span style="color:#0086b3;">%d </span><span style="color:#183691;">&quot;</span><span style="color:#323232;">, n.value)
		</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> n.next </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
			</span><span style="font-weight:bold;color:#a71d5d;">break
		</span><span style="color:#323232;">}
		n </span><span style="font-weight:bold;color:#a71d5d;">= *</span><span style="color:#323232;">n.next
	}
	fmt.Printf(</span><span style="color:#183691;">&quot;</span><span style="color:#0086b3;">\n</span><span style="color:#183691;">&quot;</span><span style="color:#323232;">)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">100 200 300 400 
</span></pre>
<p><code>.next</code> に生成した <code>Node</code> を代入して <code>Node</code> を連結していくのが連結リストの作り方です。</p>
<p>連結リストに関連した操作には挿入と削除があるので関数として実装していく。（探索は一旦置いとく）<br />
連結リストへのノード挿入ではリストのどこへノードを挿入するかによって処理が異なるので、次の順に実装する。</p>
<ol>
<li>先頭への挿入</li>
<li>末尾への挿入</li>
<li>中間部への挿入（インデックスで指定）</li>
</ol>
<h3 id="xian-tou-henocha-ru-li">先頭への挿入例</h3>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">// linkedListInsertHead 連結リストの先頭へのノード挿入
</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListInsertHead</span><span style="color:#323232;">(head </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node, v </span><span style="font-weight:bold;color:#a71d5d;">int</span><span style="color:#323232;">) </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node {
	</span><span style="font-style:italic;color:#969896;">// 挿入ノードの生成
	</span><span style="color:#323232;">n </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	n.value </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> v

	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		n.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">nil
	</span><span style="color:#323232;">} </span><span style="font-weight:bold;color:#a71d5d;">else </span><span style="color:#323232;">{
		</span><span style="font-style:italic;color:#969896;">// 既存の先頭ノードを後ろにつなげる
</span><span style="color:#323232;">		n.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> head
	}
	head </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> n
	</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
}

</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	</span><span style="font-style:italic;color:#969896;">// 先頭の Node を作る
	</span><span style="color:#323232;">head </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">100
	</span><span style="color:#323232;">linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertHead(head, </span><span style="color:#0086b3;">200</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">100 
200 100 
</span></pre><h3 id="mo-wei-henocha-ru-li">末尾への挿入例</h3>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">// linkedListInsertTail 連結リストの末尾へのノード挿入
</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListInsertTail</span><span style="color:#323232;">(head </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node, v </span><span style="font-weight:bold;color:#a71d5d;">int</span><span style="color:#323232;">) </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node {
	</span><span style="font-style:italic;color:#969896;">// 挿入ノードの生成
	</span><span style="color:#323232;">node </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	node.value </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> v

	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-style:italic;color:#969896;">// 先頭が空の場合
</span><span style="color:#323232;">		head </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> node
		</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
	}

	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head.next </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-style:italic;color:#969896;">// 要素が1つの場合
</span><span style="color:#323232;">		head.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> node
		</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
	}

	</span><span style="font-style:italic;color:#969896;">// 要素が2つ以上ある場合
	</span><span style="color:#323232;">n </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> head.next
	</span><span style="font-weight:bold;color:#a71d5d;">for</span><span style="color:#323232;"> n.next </span><span style="font-weight:bold;color:#a71d5d;">!= </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		n </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> n.next
	}
	n.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> node
	</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
}

</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	</span><span style="font-style:italic;color:#969896;">// 空の連結リストで試す
	</span><span style="color:#323232;">l </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(List)
	head </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> l.head
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">100</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">200</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">300</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">100 
100 200 
100 200 300 
</span></pre><h3 id="zhong-jian-bu-henocha-ru-li-indetukusudezhi-ding">中間部への挿入例（インデックスで指定）</h3>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">// linkedListInsertNth 連結リストの中間へノードを挿入（インデックスで指定）
</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListInsertNth</span><span style="color:#323232;">(head </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node, v, nth </span><span style="font-weight:bold;color:#a71d5d;">int</span><span style="color:#323232;">) </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node {
	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> nth </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">0 </span><span style="font-weight:bold;color:#a71d5d;">||</span><span style="color:#323232;"> head </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-weight:bold;color:#a71d5d;">return </span><span style="color:#323232;">linkedListInsertHead(head, v)
	}

	</span><span style="font-style:italic;color:#969896;">// n番目のノードを取得
	</span><span style="color:#323232;">node </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> head
	</span><span style="font-weight:bold;color:#a71d5d;">for </span><span style="color:#323232;">i </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#0086b3;">1</span><span style="color:#323232;">; i </span><span style="font-weight:bold;color:#a71d5d;">&lt;=</span><span style="color:#323232;"> nth; i</span><span style="font-weight:bold;color:#a71d5d;">++ </span><span style="color:#323232;">{
		</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> i </span><span style="font-weight:bold;color:#a71d5d;">==</span><span style="color:#323232;"> nth {
			</span><span style="font-weight:bold;color:#a71d5d;">break
		</span><span style="color:#323232;">}
		node </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> node.next
	}

	</span><span style="font-style:italic;color:#969896;">// 間に挿入する
	</span><span style="color:#323232;">n </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	n.value </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> v
	n.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> node.next
	node.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> n

	</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
}

</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	</span><span style="font-style:italic;color:#969896;">// 空の連結リストで試す
	</span><span style="color:#323232;">l </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(List)
	head </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> l.head
	</span><span style="font-style:italic;color:#969896;">// 中間部分への挿入（インデックスで指定する）
</span><span style="color:#323232;">	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertNth(head, </span><span style="color:#0086b3;">456</span><span style="color:#323232;">, </span><span style="color:#0086b3;">0</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertNth(head, </span><span style="color:#0086b3;">123</span><span style="color:#323232;">, </span><span style="color:#0086b3;">0</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertNth(head, </span><span style="color:#0086b3;">789</span><span style="color:#323232;">, </span><span style="color:#0086b3;">2</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertNth(head, </span><span style="color:#0086b3;">123</span><span style="color:#323232;">, </span><span style="color:#0086b3;">1</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">456 
123 456 
123 456 789 
123 123 456 789 
</span></pre><h2 id="lian-jie-risutokaranodetaxue-chu">連結リストからのデータ削除</h2>
<p>Node が 3 つの連結リストを作って中間ノードを削除する例です</p>
<pre style="background-color:#ffffff;">
<span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	</span><span style="font-style:italic;color:#969896;">// 先頭 Node の生成
	</span><span style="color:#323232;">head </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">100
	</span><span style="font-style:italic;color:#969896;">// 中間 Node の生成
</span><span style="color:#323232;">	head.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.next.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">200
	</span><span style="font-style:italic;color:#969896;">// 末尾 Node の生成
</span><span style="color:#323232;">	head.next.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.next.next.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">300
	</span><span style="color:#323232;">linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	</span><span style="font-style:italic;color:#969896;">// 連結リストの中間 Node を削除する
</span><span style="color:#323232;">	head.next.value </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> head.next.next.value
	head.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> head.next.next
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">100 200 300 
100 300 
</span></pre>
<p>やることは値とポインタのつげ替えです。
中間 Node の value に末尾 Node の value を代入して、先頭の Node のポインタに末尾 Node のポインタを代入して中間 Node を削除しています。</p>
<p>続けて次の機能を関数で実装していきます</p>
<ol>
<li>先頭から削除</li>
<li>末尾から削除</li>
<li>中間部から削除（インデックスで指定）</li>
<li>削除ノードを指定</li>
</ol>
<h3 id="xian-tou-karanoxue-chu-li">先頭からの削除例</h3>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">// linkedListDeleteHead 先頭位置からのノードの削除
</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListDeleteHead</span><span style="color:#323232;">(head </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node) </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node {
	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-style:italic;color:#969896;">// 先頭ノードがない場合
		</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
	}

	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head.next </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-style:italic;color:#969896;">// 先頭ノードだけある場合
		</span><span style="color:#323232;">l </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(List)
		</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> l.head
	}

	</span><span style="font-style:italic;color:#969896;">// 複数ノードがある場合
	// head ポインタが連結リストの二番目のノードを指すように変更
	</span><span style="color:#323232;">n </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> head.next
	head.value </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> n.value
	head.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> n.next
	</span><span style="font-style:italic;color:#969896;">// 先頭ノードの使われていたメモリを開放する（これは GC に任せる）
	</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
}

</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	l </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(List)
	head </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> l.head
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">123</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">456</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">789</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	</span><span style="font-style:italic;color:#969896;">// 先頭位置からの削除
</span><span style="color:#323232;">	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListDeleteHead(head)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">123 456 789 
456 789 
</span></pre><h3 id="mo-wei-karanoxue-chu-li">末尾からの削除例</h3>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">// linkedListDeleteTail 末尾位置のノードの削除
</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListDeleteTail</span><span style="color:#323232;">(head </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node) </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node {
	</span><span style="font-style:italic;color:#969896;">/*
	連結リストの先頭からノードを横断していく
	末尾ノードの一つ手前のノードを探し
	このノードが末尾となるようにポインタには nil を設定する
	 */
	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
	}

	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head.next </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-style:italic;color:#969896;">// 先頭ノードだけある場合
		</span><span style="color:#323232;">l </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(List)
		</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> l.head
	}

	</span><span style="font-style:italic;color:#969896;">// ノードが2つの場合
	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> head.next.next </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		head.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">nil
		</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
	}

	</span><span style="font-style:italic;color:#969896;">// 要素が3つ以上ある場合
	</span><span style="color:#323232;">n </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> head.next
	</span><span style="font-style:italic;color:#969896;">// ノードを横断
	</span><span style="font-weight:bold;color:#a71d5d;">for</span><span style="color:#323232;"> n.next </span><span style="font-weight:bold;color:#a71d5d;">!= </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> n.next.next </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
			</span><span style="font-style:italic;color:#969896;">// 末尾ノードの一つ手前のノードで横断を止める
			</span><span style="font-weight:bold;color:#a71d5d;">break
		</span><span style="color:#323232;">}
		n </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> n.next
	}
	</span><span style="font-style:italic;color:#969896;">// 末尾ノードの一つ手前のノードを末尾ノードにする
</span><span style="color:#323232;">	n.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">nil

	</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
}

</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	l </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(List)
	head </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> l.head
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">123</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">456</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">789</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	</span><span style="font-style:italic;color:#969896;">// 末尾位置からの削除
</span><span style="color:#323232;">	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListDeleteTail(head)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListDeleteTail(head)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">123 456 789 
123 456 
123 
</span></pre><h3 id="zhong-jian-bu-karanoxue-chu-li-indetukusudezhi-ding">中間部からの削除例（インデックスで指定）</h3>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">
</span><span style="font-style:italic;color:#969896;">// linkedListDeleteNth 連結リストの中間のノードを削除（インデックスで指定）
</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListDeleteNth</span><span style="color:#323232;">(head </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node, nth </span><span style="font-weight:bold;color:#a71d5d;">int</span><span style="color:#323232;">) </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node {
	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> nth </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">0 </span><span style="font-weight:bold;color:#a71d5d;">||</span><span style="color:#323232;"> head </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-weight:bold;color:#a71d5d;">return </span><span style="color:#323232;">linkedListDeleteHead(head)
	}

	</span><span style="font-style:italic;color:#969896;">// n番目のノードを取得
	</span><span style="color:#323232;">node </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> head
	</span><span style="font-weight:bold;color:#a71d5d;">for </span><span style="color:#323232;">i </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#0086b3;">1</span><span style="color:#323232;">; i </span><span style="font-weight:bold;color:#a71d5d;">&lt;=</span><span style="color:#323232;"> nth; i</span><span style="font-weight:bold;color:#a71d5d;">++ </span><span style="color:#323232;">{
		</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> i </span><span style="font-weight:bold;color:#a71d5d;">==</span><span style="color:#323232;"> nth {
			</span><span style="font-style:italic;color:#969896;">// 削除対象ノードの一つ手前のノードで止める
			</span><span style="font-weight:bold;color:#a71d5d;">break
		</span><span style="color:#323232;">}
		node </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> node.next
	}

	</span><span style="font-weight:bold;color:#a71d5d;">if</span><span style="color:#323232;"> node.next </span><span style="font-weight:bold;color:#a71d5d;">== </span><span style="color:#0086b3;">nil </span><span style="color:#323232;">{
		</span><span style="font-style:italic;color:#969896;">// 指定インデックスが要素数を超えている場合は末尾を削除する
		</span><span style="font-weight:bold;color:#a71d5d;">return </span><span style="color:#323232;">linkedListDeleteTail(head)
	}

	</span><span style="font-style:italic;color:#969896;">// 削除対象ノードの一つ手前のノード、削除ノードの一つあとのノードを連結するようにポインタ情報を書き換える
</span><span style="color:#323232;">	node.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> node.next.next

	</span><span style="font-weight:bold;color:#a71d5d;">return</span><span style="color:#323232;"> head
}

</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	l </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(List)
	head </span><span style="font-weight:bold;color:#a71d5d;">:=</span><span style="color:#323232;"> l.head
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">123</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">456</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">789</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">999</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">789</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">456</span><span style="color:#323232;">)
	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListInsertTail(head, </span><span style="color:#0086b3;">123</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	</span><span style="font-style:italic;color:#969896;">// 中間位置からの削除
</span><span style="color:#323232;">	head </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">linkedListDeleteNth(head, </span><span style="color:#0086b3;">3</span><span style="color:#323232;">)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力結果</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">123 456 789 999 789 456 123 
123 456 789 789 456 123 
</span></pre><h3 id="xue-chu-nodowozhi-ding-suruli">削除ノードを指定する例</h3>
<p>削除するノードを直接指定する方法だと検索不要なので計算量は配列と同じ(?)になる。この実装では指定するノードが末尾ノード以外という条件付きだけど。</p>
<pre style="background-color:#ffffff;">
<span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">linkedListDelete</span><span style="color:#323232;">(n </span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">Node) {
	n.value, n.next </span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;"> n.next.value, n.next.next
}

</span><span style="font-weight:bold;color:#a71d5d;">func </span><span style="font-weight:bold;color:#795da3;">main</span><span style="color:#323232;">() {
	</span><span style="font-style:italic;color:#969896;">// 先頭 Node の生成
	</span><span style="color:#323232;">head </span><span style="font-weight:bold;color:#a71d5d;">:= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">100
	</span><span style="font-style:italic;color:#969896;">// 中間 Node の生成
</span><span style="color:#323232;">	head.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.next.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">200
	</span><span style="font-style:italic;color:#969896;">// 末尾 Node の生成
</span><span style="color:#323232;">	head.next.next </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#62a35c;">new</span><span style="color:#323232;">(Node)
	head.next.next.value </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">300
	</span><span style="color:#323232;">linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
	</span><span style="font-style:italic;color:#969896;">// 連結リストの先頭 Node を直接指定して削除
	</span><span style="color:#323232;">linkedListDelete(head)
	linkedListPrint(</span><span style="font-weight:bold;color:#a71d5d;">*</span><span style="color:#323232;">head)
}
</span></pre>
<p>出力内容</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">100 200 300 
200 300 
</span></pre>
<p>長くなったので双方向連結リストは別のエントリで書こうと思います。</p>
<h3 id="bu-zu">補足</h3>
<p>このエントリは放送大学の『データ構造とプログラミング』のプログラム部分を Go で書こうと思って始めたものです。</p>
<hr />
<ol>
<li>『データ構造とプログラミング』鈴木一史 2018年3月</li>
</ol>

      
  </article>
</section>


       

      <footer>
        
          
<figure class="mini_logo ">
    <a href="https:&#x2F;&#x2F;niikunihiro.github.io" style="background-image: url(https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;niikunihiro&#x2F;niikunihiro.github.io&#x2F;d2b561e132826a2e42470c9b4f28213701632e46&#x2F;profile.jpg)"></a>
</figure>
<h5>
    <a href="https:&#x2F;&#x2F;niikunihiro.github.io">Nii Note</a>
</h5>

          
<ul class="social_list foot_list" >
    
    
    <li class="button extra_small font_faint"><a href="https://github.com/niikunihiro" target="_blank" >niikunihiro</a><i class="fab fa-github" ></i></li>
    
    
    
    
    
    
    
    
    
</ul>

        
      </footer>
    </body>
</html>
